<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sidds Dev - Samsung Edition (v6.0)</title>
  <style>
    /* --- SAMSUNG ONE UI THEME --- */
    :root {
      --samsung-blue: #0381fe;
      --bg-dark: #000000;
      --panel-bg: #121212;
      --text-white: #ffffff;
      --text-gray: #a0a0a0;
      --danger: #cf2e2e;
    }

    body {
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-white);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    /* HEADER */
    header {
      background-color: var(--panel-bg);
      padding: 15px 20px;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }

    h1 { margin: 0; font-size: 22px; font-weight: 600; letter-spacing: 1px; }
    h1 span { color: var(--samsung-blue); }

    .status-badge {
      font-size: 12px;
      font-weight: bold;
      background: #333;
      padding: 5px 12px;
      border-radius: 20px;
      color: #777;
      text-transform: uppercase;
    }

    /* MAIN LAYOUT */
    .main-container {
      display: flex;
      flex-grow: 1;
      height: 100%;
      overflow: hidden;
    }

    /* TERMINAL (LEFT) */
    .terminal-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 20px;
      gap: 15px;
    }

    #terminal {
      flex-grow: 1;
      background-color: #050505;
      border: 1px solid #333;
      border-radius: 12px;
      padding: 15px;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 13px;
      color: var(--samsung-blue);
      overflow-y: auto;
      white-space: pre-wrap;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
    }

    .input-row { display: flex; gap: 10px; }
    
    input[type="text"] {
      flex-grow: 1;
      background: #1a1a1a;
      border: 1px solid #333;
      color: white;
      padding: 12px;
      border-radius: 8px;
      outline: none;
    }
    input:focus { border-color: var(--samsung-blue); }

    .btn-send {
      background: #222;
      color: white;
      border: none;
      padding: 0 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    /* CONTROLS (RIGHT) */
    .controls-wrapper {
      width: 340px;
      background-color: var(--panel-bg);
      border-left: 1px solid #333;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      padding: 20px;
      gap: 20px;
    }

    .section-header {
      font-size: 12px;
      color: var(--text-gray);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
      border-bottom: 1px solid #333;
      padding-bottom: 5px;
      margin-bottom: 5px;
    }

    /* BUTTONS */
    .btn-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    button {
      padding: 12px;
      border: none;
      border-radius: 12px; /* Samsung Rounded Corners */
      background: #252525;
      color: #e0e0e0;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
    }

    button:hover { background: #333; transform: translateY(-1px); }
    button:active { transform: scale(0.98); }

    /* Special Buttons */
    .btn-primary { background: var(--samsung-blue); color: white; text-align: center; font-weight: bold; width: 100%; font-size: 14px; padding: 15px;}
    .btn-primary:hover { background: #026bd6; }

    .btn-danger { background: rgba(207, 46, 46, 0.15); color: #ff6b6b; border: 1px solid rgba(207, 46, 46, 0.3); text-align: center; }
    .btn-danger:hover { background: var(--danger); color: white; }

    .btn-highlight { border-left: 3px solid var(--samsung-blue); }
    .btn-fun { border-left: 3px solid #ff00cc; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #121212; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }

  </style>
</head>
<body>

  <header>
    <h1>SIDDS<span>DEV</span></h1>
    <div id="status" class="status-badge">Disconnected</div>
  </header>

  <div class="main-container">
    
    <div class="terminal-wrapper">
      <div id="terminal">
        > SIDDS DEV CONSOLE READY.
        > CLICK "CONNECT SYSTEM" TO BEGIN.
      </div>
      <div class="input-row">
        <input type="text" id="customCmd" placeholder="Enter manual command...">
        <button class="btn-send" onclick="sendManual()">TX</button>
      </div>
    </div>

    <div class="controls-wrapper">
      
      <button onclick="connectSerial()" class="btn-primary" id="connectBtn">CONNECT SYSTEM</button>

      <div class="section-header">WiFi Recon & Attack</div>
      <div class="btn-grid">
        <button class="btn-highlight" onclick="send('scanap')">1. Scan APs</button>
        <button onclick="send('stopscan')">2. Stop Scan</button>
        <button onclick="send('select -a')">3. Select ALL</button>
        <button class="btn-highlight" onclick="send('attack -t beacon')">4. Beacon Spam</button>
        <button onclick="send('attack -t deauth')">5. Deauth Flood</button>
        <button onclick="send('attack -t probe')">6. Probe Flood</button>
        
        <button class="btn-fun" style="grid-column: span 2;" onclick="send('attack -t rickroll')">üéµ START RICKROLL BEACON</button>
        
        <button class="btn-fun" style="grid-column: span 2;" onclick="addFunnyNames()">üòÇ LOAD "DESI" FUNNY LIST</button>
        
        <button class="btn-danger" style="grid-column: span 2;" onclick="send('stopscan')">üõë STOP WIFI ATTACKS</button>
      </div>

      <div class="section-header">Bluetooth Low Energy (BLE)</div>
      <div class="btn-grid">
        <button onclick="send('ble_scan')">Scan BLE</button>
        <button onclick="send('stopscan')">Stop Scan</button>
        
        <button class="btn-highlight" onclick="sendSequence('blespam -t samsung')">üì± Samsung Spam</button>
        <button class="btn-highlight" onclick="sendSequence('blespam -t apple')">üçé Apple Spam</button>
        <button onclick="sendSequence('blespam -t google')">ü§ñ Android Spam</button>
        <button onclick="sendSequence('blespam -t windows')">üíª Windows Spam</button>
        <button onclick="sendSequence('blespam -t flipper')">üê¨ Flipper Spam</button>
        
        <button onclick="sendSequence('spoofat -t random')">üè∑Ô∏è Spoof Airtags</button>
        <button class="btn-danger" style="grid-column: span 2;" onclick="sendSequence('blespam -t all')">üí£ BRUTAL (SPAM ALL)</button>
        
        <button class="btn-danger" style="grid-column: span 2;" onclick="send('stopscan')">üõë STOP BLE ATTACKS</button>
      </div>

      <div class="section-header">System</div>
      <div class="btn-grid">
        <button onclick="send('reboot')">Reboot</button>
        <button onclick="send('help')">Help</button>
        <button onclick="send('clearlist -a')">Clear Lists</button>
        <button onclick="send('channel')">Chk Channel</button>
      </div>

    </div>
  </div>

  <script>
    let port;
    let writer;
    let keepReading = false;
    let incomingBuffer = "";

    const terminal = document.getElementById('terminal');
    const connectBtn = document.getElementById('connectBtn');
    const statusBadge = document.getElementById('status');

    // --- CONNECT ---
    async function connectSerial() {
      if (!navigator.serial) return alert("Use Chrome or Edge.");
      try {
        port = await navigator.serial.requestPort();
        await port.open({ baudRate: 115200 });

        statusBadge.textContent = "CONNECTED";
        statusBadge.style.color = "#00ff41";
        connectBtn.textContent = "SYSTEM ACTIVE";
        connectBtn.style.background = "#222";
        keepReading = true;
        
        readLoop();
        updateTerminalLoop();
        setTimeout(() => send('help'), 500); 

      } catch (err) {
        console.error(err);
      }
    }

    // --- SEND COMMAND (Standard) ---
    async function send(cmd) {
      if (!port || !port.writable) return;
      // Show command in terminal for verification
      incomingBuffer += `\n[TX] > ${cmd}\n`;
      const encoder = new TextEncoder();
      const writer = port.writable.getWriter();
      await writer.write(encoder.encode(cmd + "\r\n"));
      writer.releaseLock();
    }

    // --- AUTO-KILL SEQUENCE (The Fix) ---
    // This stops any running scan before starting the spam
    async function sendSequence(attackCmd) {
        incomingBuffer += `\n[SEQ] > Stopping Scan & Starting Attack...\n`;
        
        // 1. Send Stop
        await send('stopscan');
        
        // 2. Wait 300ms for radio to clear
        await new Promise(r => setTimeout(r, 300));
        
        // 3. Send Attack
        await send(attackCmd);
    }

    function sendManual() {
      const input = document.getElementById('customCmd');
      if (input.value) { send(input.value); input.value = ""; }
    }

    // --- MACRO: INDIAN FUNNY NAMES ---
    async function addFunnyNames() {
      incomingBuffer += "\n[MACRO] > Loading Funny Indian WiFi Names...\n";
      const names = [
        "Chintu_Ka_Net",
        "Bhabhi_Ki_WiFi",
        "Virus_Loading...",
        "ModiJi_5G_Test",
        "Aapka_Net_Slow_Hai",
        "FBI_Surveillance_Van",
        "Tera_Baap_Aaya",
        "Mummy_Ka_iPhone",
        "Password_Mat_Maang",
        "System_Hacked"
      ];
      for (const name of names) {
        await send(`ssid -a -n "${name}"`);
        await new Promise(r => setTimeout(r, 300));
      }
      incomingBuffer += "\n[MACRO] > Names Loaded! Click 'Beacon Spam' to broadcast.\n";
    }

    // --- READER LOOP ---
    async function readLoop() {
      const decoder = new TextDecoder();
      while (port.readable && keepReading) {
        const reader = port.readable.getReader();
        try {
          while (true) {
            const { value, done } = await reader.read();
            if (done) break;
            if (value) incomingBuffer += decoder.decode(value);
          }
        } catch (error) { console.error(error); } 
        finally { reader.releaseLock(); }
      }
    }

    // --- UI UPDATER ---
    function updateTerminalLoop() {
      if (incomingBuffer.length > 0) {
        if (terminal.textContent.length > 50000) terminal.textContent = "--- LOG CLEARED ---\n";
        terminal.textContent += incomingBuffer;
        terminal.scrollTop = terminal.scrollHeight;
        incomingBuffer = "";
      }
      requestAnimationFrame(updateTerminalLoop);
    }
  </script>
</body>
</html>
